<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Chi tiết sản phẩm</title>
  <link rel="stylesheet" href="styles.css">
  <script src="data.js"></script>
  <style>
    body { font-family: Arial, sans-serif; background: #f9f9f9; margin: 0; }
    .container { max-width: 1200px; margin: auto; padding: 20px; background: #fff; }
    .product-layout { display: flex; gap: 40px; margin-top: 30px; }
    .product-img img { max-width: 100%; border: 1px solid #ccc; }
    .product-info { flex: 1; }
    .product-info h1 { font-size: 28px; margin-bottom: 10px; }
    .price { font-size: 22px; color: red; margin: 10px 0; }
    .old-price { text-decoration: line-through; color: #888; margin-left: 10px; }
    .details-table { width: 100%; border-collapse: collapse; margin: 20px 0; }
    .details-table td { padding: 8px; border-bottom: 1px solid #eee; }
    .desc { margin-top: 30px; line-height: 1.6; }
    .btn.primary { background: #e74c3c; color: white; padding: 12px 20px; border: none; cursor: pointer; font-weight: bold; }
    .btn.primary:hover { background: #c0392b; }
    .related-products { margin-top: 60px; }
    .related-products h2 { margin-bottom: 20px; }
    .related-list { display: flex; gap: 20px; flex-wrap: wrap; }
    .related-item { width: 180px; border: 1px solid #ddd; padding: 10px; background: #fff; text-align: center; }
    .related-item img { max-width: 100%; height: auto; }
    .related-item .title { font-size: 16px; margin: 10px 0; }
    .related-item .price { color: red; font-weight: bold; }
  </style>
</head>
<body>
  <!-- Topbar -->
<div class="topbar">
  <div class="container">
    <div>Ưu đãi 12.12 • Freeship đơn từ 99k</div>
    <div>Hotline: 1900 0000 • Hỗ trợ</div>
  </div>
</div>

<!-- Header -->
<header class="header">
  <div class="container">
    <a class="logo" href="index.html">BOOKSHOP DEMO</a>
    <div class="search">
      <input type="text" placeholder="Tìm kiếm..." onkeydown="if(event.key==='Enter') location.href='category.html?cat=all'">
      <button onclick="location.href='category.html?cat=all'">Tìm kiếm</button>
    </div>
    <div class="actions" data-auth-box></div>
    <a class="action" href="cart.html">Giỏ hàng <span class="pill" data-cart-count>0</span></a>
  </div>
</header>

<!-- Nav -->
<nav>
  <div class="container">
    <ul class="menu">
      <li><a href="category.html?cat=all">Tất cả</a></li>
      <li><a href="category.html?cat=van-hoc">Văn học</a></li>
      <li><a href="category.html?cat=kinh-te">Kinh tế</a></li>
      <li><a href="category.html?cat=thieu-nhi">Thiếu nhi</a></li>
      <li><a href="category.html?cat=manga">Manga</a></li>
      <li><a href="category.html?cat=ngoai-van">Ngoại văn</a></li>
      <li><a href="promotions.html">Ưu đãi</a></li>
    </ul>
  </div>
</nav>
  <main class="container">
    <div class="product-layout">
      <div class="product-img">
        <img id="book-img" src="" alt="">
      </div>
      <div class="product-info">
        <h1 id="book-title"></h1>
        <div class="price">
          <span id="book-price"></span>
          <span class="old-price" id="book-oldprice"></span>
        </div>
        <table class="details-table">
  <tr><td>Thể loại</td><td id="book-category"></td></tr>
  <tr><td>Hình thức</td><td id="book-format"></td></tr>
  <tr><td>Số trang</td><td id="book-pages"></td></tr>
  <tr><td>Nhà xuất bản</td><td id="book-publisher"></td></tr>
</table>

        <button class="btn primary" id="addCartBtn">Thêm vào giỏ hàng</button>
      </div>
    </div>

    <div class="desc">
      <h2>Giới thiệu sách</h2>
      <p id="book-desc"></p>
    </div>

    <div class="related-products">
      <h2>Sản phẩm cùng chuyên mục</h2>
      <div class="related-list" id="relatedList"></div>
    </div>
    <!-- Footer -->
<footer>
  <div class="container footer">
    <div>
      <h4>Giới thiệu</h4>
      <p>Bookshop Demo phục vụ học tập/thử nghiệm giao diện. Thay bằng brand của bạn khi triển khai.</p>
    </div>
    <div>
      <h4>Chính sách</h4>
      <a href="policies/shipping.html">Vận chuyển</a>
      <a href="policies/returns.html">Đổi trả</a>
      <a href="policies/privacy.html">Bảo mật</a>
      <a href="policies/terms.html">Điều khoản</a>
    </div>
    <div>
      <h4>Liên hệ</h4>
      <p>Email: hello@demo.vn</p>
      <p>HCM, Việt Nam</p>
    </div>
    <div>
      <h4>Ưu đãi</h4>
      <a href="promotions.html">Mã giảm giá</a>
    </div>
  </div>
  <div class="container copyright">© 2025 Bookshop Demo</div>
</footer>

  </main>

  <script>
    const params = new URLSearchParams(window.location.search);
    const id = parseInt(params.get('id'));
    const product = window.PRODUCTS.find(p => p.id === id);

    if (product) {
      document.getElementById('book-img').src = product.img;
      document.getElementById('book-title').innerText = product.title;
      document.getElementById('book-price').innerText = product.price.toLocaleString('vi-VN') + 'đ';
      document.getElementById('book-oldprice').innerText = product.oldPrice ? product.oldPrice.toLocaleString('vi-VN') + 'đ' : '';
      document.getElementById('book-desc').innerText = product.desc;
      document.getElementById('book-category').innerText = product.category;
      document.getElementById('book-category').innerText = product.category;
      document.getElementById('book-format').innerText = product.format || 'Đang cập nhật';
      document.getElementById('book-pages').innerText = product.pages ? product.pages + ' trang' : 'Đang cập nhật';
      document.getElementById('book-publisher').innerText = product.publisher || 'Đang cập nhật';


      document.getElementById('addCartBtn').addEventListener('click', () => {
        let cart = JSON.parse(localStorage.getItem('cart') || '[]');
        cart.push({ id: product.id, title: product.title, price: product.price, qty: 1, img: product.img });
        localStorage.setItem('cart', JSON.stringify(cart));
        alert("Đã thêm vào giỏ hàng!");
      });

      // Sản phẩm liên quan
      const related = window.PRODUCTS.filter(p => p.category === product.category && p.id !== product.id);
      const relatedList = document.getElementById('relatedList');
      related.forEach(p => {
        const el = document.createElement('div');
        el.className = 'related-item';
        el.innerHTML = `
          <a href="product.html?id=${p.id}">
            <img src="${p.img}" alt="${p.title}">
            <div class="title">${p.title}</div>
            <div class="price">${p.price.toLocaleString('vi-VN')}đ</div>
          </a>
        `;
        relatedList.appendChild(el);
      });
    } else {
      document.querySelector('.container').innerHTML = "<p>Không tìm thấy sản phẩm.</p>";
    }
  </script>
</body>
</html>
